name: emu combine-outputs
description: Collapse individual abundance tables TSV into a single TSV at the desired taxonomic rank.
url: https://github.com/treangenlab/emu
authors:
  - Curro Campuzano
input:
  - A list of TSV files obtained with emu abundance. They should contain 'rel-abundance' in the filename. 
output:
  - A TSV output file collapsed at the desired taxonomic rank.
params:
  rank: Accepted ranks are 'species', 'genus', 'family', 'order', 'class', 'phylum' and 'superkingdom'
  counts: An optional boolean. If true, counts, rather than relative abundances are produced. It will fail if input files do not contain the column 'estimated counts'.
note: The sample columns in the final table will be the finale without the extension. If file ends with "_rel-abundance.tsv", the word '_rel-abundance' will be removed to (for consistency with the program). 

